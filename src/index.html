<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <title>Neural Network - Digit Recognition</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="favicon.svg" />

    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <meta name="description" content="Interactive neural network web app for handwritten digit recognition.">
    <!-- Load data.js first - contains pre-trained weights and training data -->
    <script src="../scripts/data.js"></script>
  </head>
  <body>
    <!-- ============================================================
         HEADER SECTION
         ============================================================ -->
    <header class="header">
      <div class="header-content">
        <div class="logo">
          <i class="fas fa-brain"></i>
          <span>Neural Network</span>
        </div>
        <h1 class="title">Handwritten Digit Recognition</h1>
        <p class="subtitle">Draw a digit and let the AI predict it</p>
      </div>
    </header>

    <!-- ============================================================
         MAIN APPLICATION CONTAINER
         ============================================================ -->
    <main class="main-app">
      
      <!-- Drawing Section -->
      <section class="drawing-section">
        <div class="card drawing-card">
          <div class="card-header">
            <i class="fas fa-pencil-alt"></i>
            <h2>Draw Here</h2>
          </div>
          <div class="card-body">
            <!-- Drawing Grid: 20x20 pixel canvas -->
            <div id="second" class="drawing-grid"></div>
            <button onclick="clearCanvas()" class="btn btn-secondary btn-clear">
              <i class="fas fa-eraser"></i> Clear Canvas
            </button>
          </div>
        </div>
      </section>

      <!-- Output Section -->
      <section class="output-section">
        <div class="card output-card" id="first">
          <div class="card-header">
            <i class="fas fa-chart-pie"></i>
            <h2>Prediction</h2>
          </div>
          <div class="card-body">
            <div id="output_text" class="prediction-output">
              <p class="placeholder-text">Draw a digit and click "Recognize"</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Action Buttons -->
      <section class="actions-section">
        <button onclick="neural_network_main()" id="enterdatabutton" class="btn btn-primary btn-large">
          <i class="fas fa-magic"></i>
          Recognize Digit
        </button>
        <button onclick="train_button()" id="traindatabutton" class="btn btn-accent btn-large">
          <i class="fas fa-graduation-cap"></i>
          Train Network
        </button>
      </section>

    </main>

    <!-- ============================================================
         HYPERPARAMETER CONTROLS PANEL
         ============================================================ -->
    <section class="controls-section">
      <div class="card controls-card">
        <div class="card-header">
          <i class="fas fa-sliders-h"></i>
          <h2>Training Parameters</h2>
        </div>
        <div class="card-body">
          <div class="controls-grid">
            
            <div class="control-group">
              <label for="alpha_value">
                <i class="fas fa-tachometer-alt"></i>
                Learning Rate (α)
              </label>
              <input type="number" id="alpha_value" value="0.1" step="0.01" min="0.001" max="1">
              <span class="control-hint">Controls gradient descent step size</span>
            </div>
            
            <div class="control-group">
              <label for="train_length_input">
                <i class="fas fa-redo"></i>
                Training Iterations
              </label>
              <input type="number" id="train_length_input" value="20" min="1" max="200">
              <span class="control-hint">Number of training epochs</span>
            </div>
            
            <div class="control-group">
              <label for="lambda_value">
                <i class="fas fa-shield-alt"></i>
                Regularization (λ)
              </label>
              <input type="number" id="lambda_value" value="0.00001" step="0.000001" min="0">
              <span class="control-hint">L2 regularization to prevent overfitting</span>
            </div>
            
            <div class="control-group">
              <label for="augmentation_toggle">
                <i class="fas fa-random"></i>
                Data Augmentation
              </label>
              <div class="toggle-container">
                <label class="toggle-switch">
                  <input type="checkbox" id="augmentation_toggle" checked>
                  <span class="toggle-slider"></span>
                </label>
                <span class="toggle-label" id="augmentation_status">Enabled</span>
              </div>
              <span class="control-hint">Random rotation, translation & noise</span>
            </div>
            
            <div class="control-group control-button">
              <button id="alpha_submit" class="btn btn-success">
                <i class="fas fa-check"></i>
                Apply Settings
              </button>
            </div>
            
          </div>
          
          <!-- Training Metrics Display -->
          <div id="cost_value_output" class="metrics-display"></div>
        </div>
      </div>
    </section>

    <!-- ============================================================
         TRAINING PROGRESS MODAL
         ============================================================ -->
    <div id="loadbar" class="modal-overlay">
      <div class="modal-content">
        <div class="modal-header">
          <i class="fas fa-cog fa-spin"></i>
          <span id="loadbartitle">Training in Progress...</span>
        </div>
        <div class="progress-container">
          <div id="loadbarmain" class="progress-bar"></div>
        </div>
        <p class="progress-text">Please wait while the neural network learns</p>
      </div>
    </div>

    <!-- ============================================================
         TRAINING METRICS CHART
         ============================================================ -->
    <section class="chart-section">
      <div class="card chart-card">
        <div class="card-header">
          <i class="fas fa-chart-line"></i>
          <h2>Training Progress</h2>
          
          <!-- Graph View Controls -->
          <div class="chart-controls">
            <span class="chart-controls-label">Scale:</span>
            <div class="btn-group" id="scaleTypeGroup">
              <button class="btn-chip active" data-scale="linear" onclick="setGraphScale('linear')">
                <i class="fas fa-grip-lines"></i> Linear
              </button>
              <button class="btn-chip" data-scale="logarithmic" onclick="setGraphScale('logarithmic')">
                <i class="fas fa-wave-square"></i> Logarithmic
              </button>
            </div>
            <span class="chart-controls-label">Chart:</span>
            <div class="btn-group" id="chartTypeGroup">
              <button class="btn-chip active" data-chart="line" onclick="setChartType('line')">
                <i class="fas fa-chart-line"></i> Line
              </button>
              <button class="btn-chip" data-chart="bar" onclick="setChartType('bar')">
                <i class="fas fa-chart-bar"></i> Bar
              </button>
            </div>
            <button class="btn-chip btn-chip-icon" onclick="toggleFill()" id="fillToggle" title="Toggle Fill">
              <i class="fas fa-fill-drip"></i>
            </button>
            <button class="btn-chip btn-chip-icon" onclick="resetGraphData()" title="Reset Graph">
              <i class="fas fa-trash-alt"></i>
            </button>
          </div>
        </div>
        <div class="card-body">
          <canvas id="graphcanvas"></canvas>
        </div>
      </div>
    </section>

    <!-- ============================================================
         FOOTER
         ============================================================ -->
    <footer class="footer">
      <div class="footer-content">
        <p>Created with <i class="fas fa-heart"></i> by <strong>Akhil Sirvi</strong></p>
        <p class="footer-links">
          <a href="https://github.com/akhilsirvi/Multi-Layer-Perceptron" target="_blank">
            <i class="fab fa-github"></i> View on GitHub
          </a>
        </p>
      </div>
    </footer>

    <!-- ============================================================
         SCRIPTS
         ============================================================ -->
    <!-- Chart.js Library -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Application Scripts -->
    <script src="../scripts/graph.js" defer></script>
    <script src="../scripts/maths.js" defer></script>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Dynamically load the main neural network script
        let script = document.createElement("script");
        script.src = "../scripts/script.js";
        document.body.appendChild(script);
      });

      // Clear canvas function
      function clearCanvas() {
        const boxes = document.querySelectorAll('.box');
        boxes.forEach(box => {
          box.style.background = 'white';
          box.dataset.intensity = 0;
        });
        document.getElementById('output_text').innerHTML = '<p class="placeholder-text">Draw a digit and click "Recognize"</p>';
      }
    </script>

  </body>
</html>

  </body>
</html>

